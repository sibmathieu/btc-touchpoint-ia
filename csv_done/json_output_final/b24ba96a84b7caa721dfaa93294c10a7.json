{
  "id": "b24ba96a84b7caa721dfaa93294c10a7",
  "text": "Exp√©riences sur les frais de routage du Lightning Network asi0‚Äôs Bitcoin GuidesSubscribeSign inShare this postExp√©riences sur les frais de routage du Lightning Network asi0.substack.comCopy linkFacebookEmailNoteOtherDiscover more from asi0‚Äôs Bitcoin GuidesBitcoin-focused contentSubscribeContinue readingSign in  Exp√©riences sur les frais de routage du Lightning Network Observations sur l'impact de diff√©rentes politiques de frais sur le routage d'un n≈ìud Bitcoin Lightning asi0Jan 3, 20231Share this postExp√©riences sur les frais de routage du Lightning Network asi0.substack.comCopy linkFacebookEmailNoteOtherShareüá¨üáß English | üá™üá∏ Espa√±olINTRODUCTIONMes exp√©rimentations avec les n≈ìuds LN ont commenc√© en 2019 avec un simple n≈ìud C-Lightning. Cela a bien fonctionn√©. J'ai appris beaucoup de choses √† propos du Lightning Network, en particulier sur le fonctionnement d‚Äôun n≈ìud BTC/LN et sur les diff√©rents avantages et inconv√©nients qu‚Äôon peut rencontrer. Mais ce n'√©tait que le d√©but du LN.En 2020, j'ai d√©couvert Umbrel. J'ai donc transform√© mon n≈ìud C-Lightning en un nouveau n≈ìud Umbrel sur un Gigabyte Brix NUC avec un syst√®me d'exploitation Debian. J‚Äôai fait cela juste pour continuer √† en apprendre davantage, mais √©galement pour aider la pl√©thore de nouveaux utilisateurs qui a commenc√© √† installer Umbrel sans avoir la moindre id√©e de ce qu'est le LN, et encore moins un n≈ìud LN. Noeud Umbrel sur un Gigabyte Brix NUC (sans ventilateur) ‚Äî CPU i3, 8GB RAM, 1TB HDD (interne), Debian OS 10Le meilleur moyen √©tait donc de le tester, d'apprendre √† l'utiliser, de le d√©couvrir, puis de documenter lentement mais minutieusement toutes mes √©tapes dans des guides √† port√© de tout le monde, afin de pouvoir partager mes connaissances avec les nouveaux utilisateurs avides de ces informations et des tutos.J'ai donc pris mon temps pour structurer ce n≈ìud en √©tudiant de tr√®s pr√®s les pairs avec qui j‚Äôallais avoir des canaux, cr√©ant ainsi ma propre liste de pairs (qui contient √©galement la c√©l√®bre liste de n≈ìuds ZeroBaseFee de Ren√© Pickhardt).Je ne dis pas que mes m√©thodes, politiques de frais, approches sont les meilleures, ni m√™me bonnes. J‚Äôexprime seulement mes observations et mes propres remarques sur la fa√ßon de g√©rer un n≈ìud LN. Je ne suis pas un expert ou un d√©veloppeur LN, ni m√™me un ‚Äúgourou‚Äù √† suivre, juste une personne de la pl√®be m√©ditant sur ses exp√©riences avec son noeud LN avec bon sens.OK, ceci √©tant dit j'ai donc rejoint quelques Rings of Fire, des anneaux LN+, des groupes priv√©s etc... et je me suis √©galement connect√© √† quelques n≈ìuds sp√©cifiques, tout cela avec le n≈ìud Umbrel, et cela sur une p√©riode de 2 ans. J‚Äôai continu√© jusqu'√† atteindre une limite de 40 canaux, de canaux bien stables avec d‚Äôhonorables pairs. Pour la plupart d'entre eux, j‚Äôai pu avoir un contact direct ‚Äî  il est bon de pouvoir s'entraider / collaborer entre pair (peut-√™tre qu‚Äôun jour je ferais un guide √† ce sujet).Ensuite, en 2022, j'ai commenc√© un n≈ìud secondaire, un n≈ìud priv√©, sans alias, sous Tor seulement, et non li√© de quelconque mani√®re que ce soit √† mon identit√© r√©elle ou √† toute autre identit√© en ligne. Cela fait partie d'une autre exp√©rience qui est d√©crite dans ce guide.√Ä l‚Äô√©poque, comme maintenant, je ne suis pas du tout √©t√© int√©ress√© par ‚Äúfaire de l'argent‚Äù avec le LN. Mon objectif est d'aider √† faire du LN un r√©seau de paiements tr√®s liquide, afin que les utilisateurs puissent l'utiliser au quotidien et cesser d‚Äôutiliser cette putain de monnaie fiat. Il nous est impossible d‚Äôavoir un r√©seau de paiement sain si nous commen√ßons √† nous voler les uns les autres et √† bloquer le r√©seau pour seulement quelques mis√©rables sats.Lorsque le LN sera vraiment stable, avec un bon algorithme de recherche des routes et des n≈ìuds sains et viables, avec de nombreux utilisateurs l'utilisant au quotidien pour leurs paiements (et pas seulement pour de stupides r√©-√©quilibrages), alors seulement √† ce moment il sera peut-√™tre question d'augmenter les frais de routage afin de construire des incitations √©conomiques pour les n≈ìuds de routage.Cependant nous n'en sommes pas encore l√† ! Qu‚Äôimporte que d‚Äôautres clament qu'ils ont gagn√© un montant x sats/mois. VOUS N'Y ARRIVEREZ PAS !Et rappelez-vous : le but est de FUCK LES BANQUES, pas de se fuck mutuellement !Si d√®s √† pr√©sent nous facturons des frais √©lev√©s aux nouveaux utilisateurs qui souhaitent juste tester le LN, nous r√©ussirons uniquement √† leur faire peur et surtout √† les faire fuire. Ils se diront que le Lightning Network n‚Äôest qu‚Äôun syst√®me de paiement merdique et cher.Ne les effrayez pas, aidez-les √† tester et √† utiliser cette fantastique technologie. Nous aurons tout le loisir d‚Äôaugmenter les frais plus tard afin de maintenir une incitation √©conomique pour les noeuds de routage.LA CUPIDIT√â √Ä OUTRANCE EST CE QUI TUE L'INNOVATION.Un noob int√©ress√© par un revenu passif gr√¢ce au LNComment cela a commenc√©‚Ä¶ #ZeroFeeFebruaryAinsi, en f√©vrier 2022, j'ai lanc√©, avec l'un de mes pairs aguerris, un mouvement de #ZeroFeeFebruary au sein de nombreux RoF (ring of fire) et groupes. Cela s'est plut√¥t bien pass√© avec plus de 35 n≈ìuds qui ont uni leurs forces et fix√© leurs frais de tous les canaux √† 0/0 (0 frais de base, 0 ppm).Mon humble n≈ìud Umbrel a commenc√© √† doubler, tripler et quadrupler le nombre de paiements achemin√©s. J'ai √©galement ferm√© quelques petits canaux zombies avec des pairs qui ne se sont pas du tout d√©velopp√©s au cours des 6 derniers mois.C'est un aspect tr√®s important : les pairs qui ne grandissent pas assez sur une p√©riode de plusieurs mois, sont inutiles et peuvent faire plus de d√©g√¢ts que de bien.Donc ceci est un avertissement √† tous les noobs avec un noeud : Si vous pr√©voyez de faire tourner un noeud pour le LN avec seulement 2 ou 3 canaux et de ne jamais augmenter le nombre de canaux, alors attendez-vous √† ce que vos pairs ferment leurs canaux avec vous. Stackez plus de sats1 et ensuite vous serez en mesure d'ouvrir plus de canaux LN. Les fonds dans le LN ne sont pas ‚Äúperdu‚Äù ni m√™me ‚Äúbloqu√©‚Äù comme certains s'amusent √† vous faire croire. Non, les fonds dans les canaux LN SONT JUSTE DE LA PUTAIN DE LIQUIDIT√â. Cela signifie qu'elle DOIT CIRCULER. Sinon, c'est totalement inutile.Puis j‚Äôai continu√© par fermer les canaux avec les pairs qui imposent des frais √©lev√©s. Pour moi, des frais √©lev√©s sont : Frais de base > 1 sats : tout ce qui est plus √©lev√© que cela est stupide et fait plus de d√©g√¢ts que de bien.ppm > 150-200 msats : parfois les frais ppm sont n√©cessaires pour pousser la liquidit√© d'un c√¥t√© ou de l'autre, surtout quand vous en avez vraiment besoin. Ce qui est le cas des marchands qui ne veulent pas faire de r√©-√©quilibrage en permanence mais pr√©f√®rent laisser le trafic faire son propre √©quilibrage.Ainsi, si un pair connect√© √† mon n≈ìud utilise de telles politiques de frais pour tous ses canaux comme par exemple 2 sats / 300 ppm, alors je fermerai le canal, sans aucun remord. Ou bien, je fixerai des frais de base tellement √©lev√©s que tout le trafic sera bloqu√© sur ce canal, et j‚Äôattendrai que ce soit lui qui ferme le canal.Aussi pour tout ceux qui utilisent intensivement le script charge-lnd : s'il vous pla√Æt si vous √™tes un noob arr√™tez de l'utiliser ! Ou au moins apprenez son fonctionnement avant de l‚Äôutiliser. Mal-employ√©, il fait plus de mal que de bien. Le script est con√ßu pour d√©sactiver automatiquement les canaux qui sont en dessous d‚Äôun certain niveau de ‚Äúrentabilit√©‚Äù. L'utilisateur ne sait m√™me pas que ses canaux sont d√©sactiv√©s et cela signifie que cela cr√©√© des VALVES FERM√âES. Et que par cons√©quent plus aucun routage ne peut s‚Äôeffectuer √† travers ces canaux. Donc quand je vois un noeud avec beaucoup de canaux d√©sactiv√©s, en permanence, c'est un message clair : il utilise ce putain de script inf√¢me, ou il est connect√© √† de nombreux pairs utilisant ce script. Pour moi, ce pair est un ‚Äúno go‚Äù.La liquidit√© circule dans les deux sens, oui c'est plus lent, mais soyez patient. Laissez le r√©seau Lightning se d√©velopper naturellement et la liquidit√© circuler organiquement. Si vous mettez des barri√®res sur son chemin, et bien le r√©seau en trouvera simplement d'autres.J'ai essay√© d'√™tre raisonnable avec les pairs qui sont r√©actifs, comprennent la situation et qui ajustent leurs frais en cons√©quence. Lentement, l'avidit√© sera isol√©e dans les limites ext√©rieures de la galaxie LN.Le mois de f√©vrier ressemble √† ceci, pour mon humble n≈ìud, une liquidit√© totale de 70 Msats √©quilibr√©e sur 40 canaux :Nombre de paiements rout√©s par jour sur l‚Äôensemble du mois de F√©vrier 2022Nombre de sats rout√© par jour sur l‚Äôensemble du mois de F√©vrier 2022Au total, c‚Äôest plus de 995 paiements qui ont √©t√© achemin√©s, pour un total de 84 millions de sats.Le pic le plus √©lev√© a √©t√© de 95 paiements rout√©s et 9M de sats au total en un jour. En moyenne, durant tout le mois de f√©vrier, j‚Äôai enregistr√© 20 txs/jour avec environ 3M de sats rout√©s par jour ‚Äî pas mal, pour un si petit n≈ìud. Je n'ai pas de tr√®s grands canaux, ni m√™me de wumbo canal.Mon n≈ìud de test avait : 5 canaux au-dessus de 4M sats, 14 canaux entre 4M et 1M sats, 12 canaux √† 1M sats et 9 canaux de 500k sats. Au total 40 canaux (plus ou moins, d√©pendant de l‚Äôouverture ou la fermeture de certains).Comparaison du mois de f√©vrier avec les 6 mois pr√©c√©dents :Nombre de paiements rout√©s au cours des 6 derniers moisNombre de sats rout√©s au cours des 6 derniers moisMesures suppl√©mentaires que j'ai prisesJ'ai r√©duit la quantit√© maximale de HTLC √† 500k sats sur tous les canaux.J'ai configur√© mon n≈ìud pour fonctionner en mode hybride - Tor & clearnet. Cela aide √† trouver le chemin quand Tor est bouch√©.J'ai activ√© le compactage de mon fichier channel.db, cela aide pour la r√©activit√© du n≈ìud et r√©duit le nombre de HTLCs en attente.J'ai fix√© un nombre maximum de HTLCs dans le fichier lnd.conf √† 10.J'ai maintenu, autant que possible, tous mes pairs connect√©s. Parfois, les communications (gossip) √† travers Tor sont vraiment erratiques et signalent les pairs hors ligne m√™me s'ils ne le sont pas. Donc, ce que j'ai fait, c'est supprimer de la liste de mes pairs ceux qui apparaissent hors ligne et de les ajouter √† nouveau, si possible en utilisant son URI Clearnet. Apr√®s quelques secondes, le peer est de nouveau en ligne et le canal est pr√™t. Vous pouvez utiliser Thunderhub pour toutes ces √©tapes.ConclusionsEn g√©n√©ral, ce test a √©t√© un succ√®s pour moi. Mon objectif principal √©tait de voir la possibilit√© et la capacit√© de routage pour ce petit n≈ìud et d'apprendre de cette situation, dans des conditions avec un volume √©lev√© de trafic. Je ne veux pas doxer2 mes pairs, donc je ne posterai pas de captures d'√©cran avec les statistiques sur des canaux sp√©cifiques. Mais je peux dire que pour beaucoup d'entres eux la liquidit√© √† sacr√©ment bouger au cours de ce mois de F√©vrier 2022.Quelques points cl√©s que j'ai observ√©s :1 - Politique de fraisLes frais 0/0 attirent beaucoup de trafic, mais il est √©galement important d'avoir des pairs avec une politique similaire ou des frais faibles.2 - R√©-√©quilibrageLes pairs avec des frais √©lev√©s ont tout simplement √©t√© mis de c√¥t√©. Bien que certains ont racont√© que de nombreux n≈ìuds profitaient des frais 0/0 pour r√©-√©quilibrer gratuitement, ce n'est pas le cas. En tout cas je n'ai pas remarqu√© cela avec mon noeud. Il y a eu peu de mouvements vers des pairs avec des frais plus √©lev√©s utilisant les canaux avec des frais 0/0. Je pense que la plupart des routages ont juste suivi la voie naturelle qui consiste √† trouver le chemin le moins cher et le plus rapide, en ignorant les n≈ìuds avec des frais √©lev√©s.Beaucoup ont dit que les canaux ‚Äú√©puis√©s‚Äù (quasi-totalit√© de la liquidit√© d‚Äôun c√¥t√© du canal) ne peuvent pas router et doivent √™tre r√©-√©quilibr√©s ou ferm√©s. Ce n'est pas vrai ! J'ai eu beaucoup de canaux √©puis√©s, mais seulement sur une courte p√©riode de temps (de l‚Äôordre du jour). Mais apr√®s un certain temps, le flux de liquidit√© s‚Äôinverse et les sats se d√©placent dans l‚Äôautre sens. Tout d√©pend si votre n≈ìud a suffisamment de canaux, car avec suffisamment de liquidit√© et une liquidit√© suffisamment √©quilibr√©e au niveau global (pas au niveau du canal) les paiements continuent de router.Ceci est le rapport de liquidit√© le plus important √† prendre en compteLorsque votre liquidit√© totale entrante et sortante est presque √©gale et que vous avez au moins 10 √† 30 canaux de qualit√© (pas morts, pas en bordure ext√©rieure de la galaxie LN), alors votre n≈ìud routera naturellement des deux c√¥t√©s. Lorsque le rapport entr√©e/sortie est d√©s√©quilibr√© de plus de 30%, alors oui, vous commencez √† avoir des probl√®mes car votre n≈ìud peut se boucher.Depuis tout ce temps, je n'ai JAMAIS r√©-√©quilibr√© d'aucune fa√ßon, aucun canal. Je n'ai pas utilis√© de script automatis√© pour cela, pas m√™me manuellement. Je me suis content√© de m'asseoir et de regarder.Je voulais aussi voir si le simple fait d'ajuster l√©g√®rement le HTLC peut aider √† r√©-√©quilibrer automatiquement le canal en redirigeant le flux l√† o√π il est n√©cessaire et o√π il y a assez de liquidit√©.3 - Ressources, charge m√©moireJ'ai remarqu√© que la RAM est plus utilis√©e lorsque plus de HTLCs √©taient en attente. Limiter le nombre total de HTLCs en attente dans le fichier lnd.conf m'a un peu aid√©. Je ne suis pas s√ªr de la raison pour laquelle il y avait constamment au moins 3-4 HTLCs en attente pendant 5 √† 15 minutes.  Est-ce √† cause de mon n≈ìud ? de mon disque dur de mauvaise qualit√© ? de ma connexion (j'√©tais en mode hybride tout le temps). de mes pairs ? et/ou des probl√®mes habituels avec Tor ? Je comprends la signification des HTLCs en attente, mais pas depuis si longtemps que √ßa. J'aimerais pouvoir faire quelque chose √† leur sujet, mais je n'ai pas assez de connaissances ou des bonnes informations sur la fa√ßon m‚Äôen pr√©venir. Peut-√™tre que LN a besoin d'une am√©lioration dans ce domaine. Je ne sais tout simplement pas.4 - Centralit√© des n≈ìuds et croissanceVotre position au sein du r√©seau, appel√©e la centralit√© de votre, et ses connexions sont des aspects tr√®s importants. J'ai d√©j√† post√© une liste avec tous les outils LN disponibles. Utilisez-les, ils sont utiles pour observer et analyser vos pairs, les routes, etc ... Les pairs qui sont loin, √† la p√©riph√©rie du r√©seau, ne routeront pas beaucoup de sats, contrairement √† ceux qui ont des connexions avec de nombreux n≈ìuds au centre du r√©seau et des RoF (Ring of Fire).Donc si vous avez un nouveau noeud (ou m√™me un ancien noeud) mais que vous avez de mauvaises connexions... changez-les. Et essayez de ne pas vous connecter avec des pairs qui ont d√©j√† les m√™mes connexions que vous. Les RoF sont tr√®s bons pour s'√©tendre. Mais attention, soyez attentif car lorsque vous vous joignez √† de nombreux anneaux diff√©rents avec les m√™mes pairs, cela n'aide en rien. Cela peut m√™me √™tre pire que mieux, car vous pouvez vous retrouver enfermer dans une boucle, et √©loigner votre noeud du centre du r√©seau.  D√©ployer des connexions vers des n≈ìuds qui ne sont pas dans la plupart des RoF, soyez le pont entre eux et les autres RoF. Analyser le comportement de vos pairs LN chaque fois que vous avez le temps, et faites √©galement cela avec les nouveaux n≈ìuds du r√©seau. Connectez-vous avec plus de n≈ìuds qui utilisent 0 frais de base (‚Äú0 fee base‚Äù) et une politique de frais ppm faible. Vous retrouverez ici une longue liste maintenue par Ren√© Pickhardt r√©pertoriant de nombreux n≈ìuds ‚Äú0 fee base‚Äù.Si vous avez un n≈ìud avec seulement 2 ou 3 canaux, et que vous ne pr√©voyez pas de vous d√©ployer davantage, vous feriez mieux de les fermer et d'utiliser un simple portefeuille mobile LN. Vous n'aidez ni vous-m√™me, ni le r√©seau. Nous savons tous qu'il est difficile de stacker des sats, mais personne ne vous oblige √† g√©rer un n≈ìud LN de qualit√© avec une grosse liquidit√©.De par mon exp√©rience, j‚Äôai pu constater que m√™me avec des canaux relativement petits (1-5M sats) on peut obtenir un bon routage. Oui, vous pourriez avoir 2 ou 3 grands canaux de 10-20M sats, mais je consid√®re que la centralit√© comme plus essentielle que de la concentration de votre liquidit√© en un seul endroit. Par exemple, au lieu d'un seul canal de 20M sats, je pr√©f√®re avoir 4 canaux de 5M sats et ainsi plus de connexions, fournissant alors une meilleure connectivit√© pour mon noeud. 5 - Utilisez la liquidit√© de votre n≈ìud de liquidit√© !Oui, si vous avez d√©j√† un n≈ìud LN, utilisez-le, bordel ! Utilisez le pour vos paiements. Partout o√π vous trouvez un marchand qui accepte les paiements via le LN, payez-le avec votre n≈ìud (ou en passant par votre noeud). Non pas parce que cela aidera les marchands ou le r√©seau, mais tout simplement pour rendre votre n≈ìud plus visible au sein du r√©seau. Vous faites circuler la liquidit√©. C'est pourquoi √ßa s‚Äôappelle ‚Äúliquidit√©‚Äù parce qu'elle est FLUIDE, elle doit couler, bouger, circuler afin de cr√©er quelque chose de grand et de merveilleux : un r√©seau de paiements √† la vitesse de l‚Äô√©clair par dessus Bitcoin ! Rester assis sur votre noeud LN en attendant que d'autres routent leurs paiements et les facturer des frais exorbitants est TOUT SIMPLEMENT STUPIDE. Et vous vous comporter tel un profiteur.Pour info, je tiens √† jour une liste d'endroits/services g√©niaux o√π vous pouvez utiliser vos sats avec votre n≈ìud LN.Prochaine √©tape : #March1ppmPour le mois de mars 2021, j‚Äôai fait le m√™me sc√©nario mais en passant cette fois-ci √† 0/1 (0 frais de base / 1 ppm).J‚Äôai √©galement d√©fini le HTLC maximum √† 500k sats pour tous les canaux avec une capacit√© sup√©rieure √† 1M, et √† 150k sinon.1ER RETOURApr√®s une semaine avec le max HTLC fix√© √† 500k sats, j'ai vu trop de txs √©chou√©es. J'ai donc commenc√© √† changer ma strat√©gie. Chaque matin, pendant mon caf√© habituel, j‚Äôai observ√© tous mes canaux et les txs rout√©es la veille, et j'ai ajust√© le HTLC maximum √† la quantit√© de sats de mon c√¥t√© du canal (aka la liquidit√© sortante). Cela signifie que si une transaction arrive jusqu‚Äô√† mon noeud, elle v√©rifiera automatiquement que le ‚Äútuyau‚Äù est assez grand pour pouvoir passer. Quand la quantit√© de sats de mon c√¥t√© est plus grand que 1M, je r√®gle simplement le HTLC max √† 800-900k sats, ou m√™me plus si n√©cessaire. Mais j‚Äôai remarqu√© que habituellement les utilisateurs commencent √† utiliser de plus en plus MPP (multiple path paiement), donc je ne pense pas qu'une tx de plus de 1Msats ne sera rout√© en un seul morceau, elle sera toujours divis√©e en plusieurs petites parties.Par exemple, pour ce canal, sur un total de 1M de sats, je n'ai de mon c√¥t√© que 112 765 sats disponibles. Je vais donc fixer un maximum de 110 000 sats HTLC (pas besoin d‚Äô√™tre exact), car je ne peux pas transmettre plus que cela. Ainsi, si un nouveau paiement achemin√© jusqu‚Äô√† mon neoud est plus grand que cela, alors automatiquement il ne tentera pas de calculer une route √† travers ce canal sp√©cifique.D√©tails du canal avec ThunderHubModification du HTLC max (en sats)Ce processus m'a pris 5 √† 10 minutes chaque matin, ce qui n'est pas chronophage car je n‚Äôai que quelques canaux, pas des centaines, et donc je n‚Äôai pas besoin d'un script automatis√© pour d√©finir les diff√©rents HTLC max.Apr√®s une semaine, j'ai remarqu√© un routage plus ‚Äúnaturel‚Äù, c‚Äôest-√†-dire avec moins d'√©checs de HTLC.Remarquez que le nombre de tx rout√©es par jour est plus ou moins stableUne autre t√¢che que j‚Äôai fait toutes les 4-5h chaque jour (2x par jour), est de v√©rifier s'il y a des canaux ‚Äúoffline‚Äù, en particulier ceux qui routent le plus. Parfois, le gossip √©choue et les canaux sont consid√©r√©s comme  ‚Äúhors ligne‚Äù, alors qu‚Äôil ne le sont pas vraiment.Alors ce que j‚Äôai fait c'est aller dans Thunderhub - Peers, puis je supprime le peer ‚Äúmort‚Äù et je le rajoute tout de suite. Apr√®s quelques secondes, le canal est √† nouveau ‚Äúen ligne‚Äù. Si le peer n'est vraiment pas en ligne, le processus d'ajout √©chouera donc rien √† faire de toute fa√ßon, il suffit de r√©essayer plus tard.Cette t√¢che peut √™tre faite avec le script BoS pour l‚Äôautomatiser toutes les 5h, mais pour le moment je peux le faire manuellement (je pr√©f√®re comme √ßa), je n'ai pas trop de d√©connexions chaque jour, et j'ai de bons pairs aussi.J'ai commenc√© le mois de mars avec un fichier channel.db de 1.3GB. Voyons ce qu'il en sera dans un mois.2ND RETOURLe 15 mars j'ai fait un compactage de la base de donn√©es. Elle √©tait d√©j√† de 2.2GB, il a fallu 5h pour la ramener √† 1.2GB. Apr√®s quelques heures, le n≈ìud a commenc√© √† router comme un fou et √† atteindre jusqu‚Äô√† plus de 100 txs rout√©es, je ne sais pas comment le compactage a pu affecter cela.Ce n'√©tait pas une grande quantit√© de sats, juste 7M sats rout√©s avec ces +100 txs. Je pense que la strat√©gie consistant √† ajuster le HTLC maximum pour les canaux avec moins de liquidit√© en est plus responsable.A partir du 15 mars, j'ai commenc√© une autre strat√©gie : pour tous les canaux de plus de 1M de sats, j'ai fix√© le HTLC minimum √† 99 sats. Je ne laisse le HTLC min de 1 sat que pour quelques canaux pour lesquelles j'utilise toujours la politique de frais 0/0 et pour lesquels je veux acheminer des micro-paiements . Suite √† cela, la liquidit√© circule bien mieux.Regardez ces quelques canaux. Je ne les ai jamais r√©-√©quilibr√©s. J‚Äôai commenc√© avec 2 dont la liquditi√© √©tait de mon c√¥t√© et 3 avec la liquidit√© de leur c√¥t√©. Apr√®s une semaine, ils sont parfaitement √©quilibr√©s.Je n'ai ABSOLUMENT RIEN fait ! Pas de scripts, pas de r√©-√©quilibrage automatique, pas de frais d√©pens√©s, j‚Äôai juste ajust√© le HTLC max et fixer 0 frais de base et 1 ppm.Certains autres noeuds commencent √† ouvrir des canaux avec le mien. Je ne sais pas pourquoi, peut-√™tre parce que certains scripts de pilotage automatique ont trouv√© mon noeud comme ‚Äúappropri√©‚Äù ou ‚Äúrentable‚Äù. Mais le truc c'est qu'ils utilisent des frais √©lev√©s... donc je ferme tout simplement leurs canaux. Je ne veux pas de pairs avides. Cela affecte √©galement mon routage. Quand j'ai des pairs avec des frais √©lev√©s, voici ce qui se passe... le nombre total des tx rout√©es diminue. J'ai ferm√© ces canaux et, voyez ce qui se passe le jour suivant ? Le nombre de tx rout√©es double.CONCLUSION POUR MARS 2022Le mois de Mars 2022 a √©t√© plut√¥t bon et cela avec une politique de frais de 0/1. Il faut aussi mentionner que pour toutes les canaux de plus de 1M de sats, j'ai r√©gl√© le HTLC minimum √† 9 sats et tous les autres √† 1 sat.Au total j'ai rout√© 1 779 txs et obtenu 113 sats en frais, avec un total de 123 218 850 sats transf√©r√©s, dans les deux sens, avec 43 canaux toujours en ligne. J'avais 2-3 canaux qui √©taient morts (les op√©rateurs m'ont inform√© de leurs probl√®mes donc je ne les ai pas ferm√©s).La m√©thode consistant √† ajuster le HTLC maximum pour chaque canal en fonction de la liquidit√© de mon c√¥t√© (aka liquidit√© sortante) semble assez bien fonctionner. Je remarque que cela r√©veillent quelques canaux ‚Äúdormants‚Äù et ils se mettent √† router plus de txs. Pour les canaux les plus actifs, ils ont, pour certains, eu de belle p√©riode sur laquelle une grande quantit√© de sats a √©t√© rout√©e.Tout d√©pend aussi des pairs et des pairs de vos pairs. Si vous avez des pairs dormants qui attendent simplement que d'autres d√©placent leurs sats et qu'ils ne font aucun paiement via le LN, alors ces pairs peuvent √™tre un fardeau et vous devriez chercher √† les remplacer. Les sats sur le LN doivent circuler pour que le r√©seau puisse se d√©velopper.Rapport mensuel (Mars 2020) du nombre total de transactions rout√©esRapport mensuel (Mars 2020) du nombre total de sats rout√©sAvril-Sept 2020 Pour le 1er avril, j'ai augment√© ma politique de frais √† 10 ppm. Voyons les cons√©quences que cela eu.Remarque au 15 avrilJusqu‚Äô√† pr√©sent j‚Äôai une moyenne stable de 50 txs rout√©es/jour. Mais je souhaite mentionner que j'ai eu √† redemarrer de nombreuses fois mon noeud, en raison de quelques autres exp√©riences avec LNbits.Aussi, j‚Äôai fait quelques ajustements de mon fichier lnd.conf et j‚Äôai fait quelques exp√©riences pour √©tudier ce qui se passait avec la ‚Äúpeste‚Äù des fermetures forc√©es des canaux.Voici la personnalisation de mon fichier lnd.conf.Remarque au 19 avrilVous pouvez ajuster votre HTLC max pour chaque canal manuellement si vous n'avez pas des centaines de canaux ou vous pouvez l'automatiser avec un script. Je pr√©f√®re le faire manuellement chaque matin, en buvant mon caf√©, cela me permet de v√©rifier l‚Äô√©tat de mon n≈ìud apr√®s une nuit bien charg√©e, et de n‚Äôajuster uniquement les canaux pour lesquels je consid√®re cela necessaire.Je ne vois vraiment pas la n√©cessit√© de faire en permanence un r√©-√©quilibrage obsessionnel et inutile. Cela cr√©e du trafic ‚Äúfactice‚Äù sur le LN et surtout √ßa vous fait d√©penser des frais pour rien.La recherche de chemin (path finding) et le routage peuvent √™tre am√©lior√©s et plus efficaces si les paiements rout√©s trouvent plus facilement le bon chemin, c‚Äôest-√†-dire celui o√π les canaux ont plus de la liquidit√© et agissent en cons√©quence, comme de l'eau le long d‚Äôun r√©seau de canalisation. Si je ‚Äúcache‚Äù cette liquidit√©, l'eau cessera de couler par ce tuyau et empruntera d'autres voies.Lorsque vous utilisez des frais plus √©lev√©s ou plus bas mais que vous cachez la liquidit√©, la transaction arrive toujours mais se retrouve bloqu√©e √† votre n≈ìud. Vous avez donc plus d'√©checs de routage, ce qui signifie que votre n≈ìud sera peu √† peu moins ‚Äúper√ßu‚Äù comme une bonne route.Oui, certains ‚Äúd√©fenseurs de la vie priv√©e‚Äù diront que r√©v√©ler le solde d'un canal avec le HTLC max doxx3 la totalit√© du solde de votre n≈ìud. C'est comme se cacher derri√®re un arbre en esquivant les balles : c'est inutile. Le solde de chacun de vos canaux peut √™tre obtenu tr√®s facilement avec moulte m√©thodes et parfois m√™me directement avec des explorateurs publics.Faites circuler la liquidit√© et de temps √† autre vous pouvez ajuster vos frais comme vous le souhaitez. Le plus important c‚Äôest que la liquidit√© circule en permanence ! Remarque au 22 avrilJ'ai augment√© la liquidit√© totale de quelques vieux et petits canaux √† plus de 2.5M sats. Le r√©sultat apr√®s quelques jours est le suivant : le nombre de txs rout√©es par jour a d√©j√† d√©pass√© les 200. Nous verrons si c'est juste temporaire ou si c'est une nouvelle tendance. J'ai √©galement remarqu√© que de plus en plus de personnes utilisent le LN pour des paiements r√©guliers (pas seulement pour des r√©-√©quilibrages inutiles).Lors de la derni√®re semaine d'avril, j'ai eu un gros pic dans le nombre de paiements rout√©s avec un maximum √† 227 txs. Puis c‚Äôest redescendu √† un niveau normal de 50 √† 60 txs par jour.En avril, j'ai d√ª red√©marrer de nombreuses fois mon noeud et j‚Äôai appliqu√© de nombreuses modifications, cela a affect√© de mani√®re significative la quantit√© de txs achemin√©es. J'ai aussi beaucoup modifier mes canaux (fermetures et ouvertures). Retrouver un bon flux au niveau des txs a prend du temps.Je ne suis pas s√ªr que le fait que j'ai augment√© les frais ppm √† 10 ait affect√© le routage.La patience est la cl√©.Je viens de voir ce tweet d'Alex Bossworth et j'ai d√©cid√© de baisser les frais pour le mois de mai prochain √† 1 ppm (Zero Base Fee Forever). J'ai post√© ici une r√©ponse pour Alex.Je pense qu'il est plus important maintenant de construire un r√©seau de paiement stable et peu co√ªteux, que de commencer une ‚Äúcourse aux frais‚Äù et de chercher √† se foutre des batons dans les roues. Et honn√™tement, je ne pense pas qu'Alex vive de ses frais de routage ...Remarque au 5 maiCe mois-ci, je vais tenter une autre ‚Äúexp√©rience‚Äù. En dehors des frais ppm s√©lectifs, entre 0 et 10ppm, je vais encore plus jouer avec le HTLC maximum.Mon plan est le suivant :fixer HTLC max √† 299k sats, quand la plupart de la liquidit√© est de mon c√¥t√© et que le canal est plus grand que 2M sats.fixer le HTLC maximum √† 199k sats, lorsque la plupart de la liquidit√© est de mon c√¥t√© et que le canal est inf√©rieur √† 2M sats.Ajustez le HTLC max si la liquidit√© se rapproche de ce HTLC max, en passant √† 199k puis √† 19k si elle descend.Ajustez le HTLC maximum en 3 √©tapes si la liquidit√© revient de mon c√¥t√©.De cette fa√ßon, il n'est pas n√©cessaire de mettre √† jour tout le temps les canaux (ce qui n'est pas recommand√©) et de ‚Äútunneliser‚Äù une quantit√© sp√©cifique de txs √† travers des canaux sp√©cifiques.J'esp√®re que les utilisateurs utiliseront de plus en plus les MPP (multi-part payments) et auront une meilleure recherche de chemin et des routes plus courtes.Remarque au 22 SeptembreRen√© Pickhardt vient de publier ce super article, qui a plus ou moins la m√™me conclusion que mon exp√©rience :Le pouvoir des valves pour une meilleure r√©gulation du d√©bit, une fiabilit√© am√©lior√©e et des taux de d√©faillance de paiements attendus plus faibles sur le r√©seau Lightning.QUE ‚ÇøITCOIN SOIT AVEC TOI !Si tu appr√©cies le travail de DarthCoin, tu peux lui envoyer quelques sats via le LN :en utilisant ses adresses LN darthcoin@getalby.com ou darthcoin@stacker.newsou simplement en scannant ce QR code avec ton portefeuille LNLNURL1DP68GURN8GHJ7MR9VAJKUEPWD3HXY6T5WVHXXMMD9AKXUATJD3CZ7D2TG35HGKQAF5LZHSi tu appr√©cies mon travail (de traduction), tu peux m‚Äôenvoyer quelques sats via le LN :en utilisant ma page alby si tu veux me laisser un messageen utilisant ma adresse LN : asi0@getalby.comou simplement en scannant ce QR code avec ton portefeuille LNLNURL1DP68GURN8GHJ7EM9W3SKCCNE9E3K7MF0D3H82UNVWQHKZUMFXQY33CD51NdT : ‚ÄúStacker des sats‚Äù est une expression qui fait r√©f√©rence √† la c√©l√®bre expression ‚Äústack sats and stay humble‚Äù qui pourrait √™tre traduite par ‚Äúacculez des sats et restez humble‚Äù2NdT : Le verbe ‚Äúdoxx‚Äù signifie publier ou diffuser sur Internet des informations personnelles sur une personne, g√©n√©ralement de mani√®re malveillante et/ou sans son consentement. Le doxxing peut inclure la publication de coordonn√©es personnelles, de photos ou de documents confidentiels, et peut avoir des cons√©quences graves pour la victime, notamment en termes de s√©curit√© personnelle et de vie priv√©e.3NdT : Le verbe ‚Äúdoxx‚Äù signifie publier ou diffuser sur Internet des informations personnelles sur une personne, g√©n√©ralement de mani√®re malveillante et/ou sans son consentement. Le doxxing peut inclure la publication de coordonn√©es personnelles, de photos ou de documents confidentiels, et peut avoir des cons√©quences graves pour la victime, notamment en termes de s√©curit√© personnelle et de vie priv√©e.1Share this postExp√©riences sur les frais de routage du Lightning Network asi0.substack.comCopy linkFacebookEmailNoteOtherShareCommentsTopNewCommunityNo postsReady for more?Subscribe¬© 2023 asi0Privacy ‚àô Terms ‚àô Collection notice Start WritingGet the appSubstack is the home for great writingOur use of cookies  We use necessary cookies to make our site work. We also set performance and functionality cookies that help us make  improvements by measuring traffic on our site. For more detailed information about the cookies we use, please see our  privacy policy.  ✖        This site requires JavaScript to run correctly. Please turn on JavaScript or unblock scripts    ",
  "title": "faire tourner son noeud",
  "subtitle": "utiliser lightning sur son propre noeud",
  "description": "asi0 (2023). experiences sur les frais de routage du lightning network",
  "link": "https://asi0.substack.com/p/experiences-sur-les-frais-de-routage",
  "quadrant": " comment j'utilise bitcoin"
}